<!doctype html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="description" content="日本のアイドルグループ「ラフ×ラフ」のメンバー、藤崎未来さんの2025年生誕祭の企画、牡蠣サーモンキャッチゲームです。牡蠣とサーモンを集めてみくちゃんの生誕祭をお祝いしよう！">
<meta property="og:description" content="牡蠣とサーモンを集めてみくちゃんの生誕祭をお祝いしよう！">
<title>牡蠣サーモンキャッチゲーム</title>

<link href="asset/css/ham.css" rel="stylesheet"/>

<link href="favicon.ico" rel="shortcut icon"/>
<link href="asset/images/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="asset/images/android-touch-icon.png" rel="icon" sizes="192x192" type="image/png"/>
</head>

<body>
<div id="main">
  <div id="splash-screen">
    <img src="asset/images/splash.png" alt="">
</div>
<div class="main_wrap" id="main_wrap">

<!-- スタート画面 （元の index.html と同一の構造を流用） -->
<div id="startScreen">
<p class="img float" id="logo"><img alt="" src="asset/images/start_logo.png"/></p>
<p class="img"><img alt="" src="asset/images/start_img.png"/></p>
<a class="btn" id="startBtn_phaser"><span id="startBtnText_phaser">遊ぶ</span></a>
</div>
<!-- ゲームオーバー/クリア画面は元と同じDOMを使う -->
<div id="gameOverScreen" style="display:none;">
<!-- ...existing markup... -->
<h1 id="endTitle">ゲームオーバー</h1>
<p class="img"><img id="clearImage" alt="" src="asset/images/gameover_img.png"/></p>
<p class="clear_img" style="display: none;"><img alt="" src="asset/images/clear_img.png"/></p>
<p id="finalScore"></p>
<div class="x_share">Xで結果をシェアしよう！→　<a class="btn-sns" id="shareBtn_top">
<div class="svg-icon svg-left">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z">
</path>
</svg>
</div>
<div class="svg-icon svg-right">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z">
</path>
</svg>
</div>
<div class="svg-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z">
</path>
</svg>
</div>
</a></div>
	<a class="btn" id="retryBtn_phaser">リトライ</a>
	<a class="btn" id="backToStartBtn_phaser">スタートに戻る</a>
</div>

<!-- 難易度選択ウィンドウ -->
<div class="modal" id="difficultyModal_phaser" style="display:none;">
<h2>難易度を選んでね</h2>
<!-- <p>★開発向け：時期に合わせてボタンを公開</p> -->
<a class="btn diffBtn_phaser" data-level="3">第1弾（むずかしい）</a>
<a class="btn_d mada">第2弾（ふつう・10/21公開）</a>
<a class="btn_d mada">第3弾（かんたん・10/28公開）</a>
</div>

<div id="bgLayer">
  <div class="bg bg1"></div>
  <div class="bg bg2"></div>
</div>
<div id="bgLayer2"></div>

<!-- Phaser が自動的にキャンバスを作るのでここでは空要素にする -->
<div id="phaser-container"></div>

</div>
</div>
<!-- スマホ用コントローラー -->
<div id="controls" style="display:none;">
<div id="leftRight">
<a class="ctrl-btn" id="leftBtn">←</a>
<a class="ctrl-btn" id="rightBtn">→</a>
</div>
<a class="ctrl-btn" id="jumpBtn">⤴</a>
</div>

<script>
// iOS Safariの拡大鏡・コピー・ズーム抑制（複数要素対応）
const targets = document.querySelectorAll('body, #main, #main_wrap, #controls, .ctrl-btn');

let lastTouchEnd = 0;
targets.forEach(target => {
  target.addEventListener('touchstart', (e) => {
    if (e.touches.length > 1) e.preventDefault(); // ピンチズーム防止
  }, { passive: false });

  target.addEventListener('gesturestart', (e) => e.preventDefault());

  target.addEventListener('touchend', (e) => {
    const now = Date.now();
    const targetTag = e.target.tagName.toLowerCase();

    // ✅ ボタン・リンク系はクリックを阻害しない
    const isClickable =
      targetTag === 'a' ||
      targetTag === 'button' ||
      e.target.closest('a, button, .btn, .ctrl-btn');

    // ✅ ダブルタップ防止のみ実施（クリック要素はスルー）
    if (!isClickable && now - lastTouchEnd <= 400) {
      e.preventDefault();
    }

    lastTouchEnd = now;
  }, { passive: false });
});
</script>

<!-- Phaser CDN -->
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
<!-- Phaserベースのゲームロジック -->
<script type="text/javascript" src="asset/js/ham.js"></script>
<script>
    const delay = (ms) => {
        return new Promise((resolve) => {
            setTimeout(resolve, ms)
        })
    };

    const hideSplashScreen = async () => {
        await delay(4000);
        document.getElementById('splash-screen').style.display = 'none';
    };
    hideSplashScreen();
</script>
<script type="text/javascript" src="asset/js/konami.js?day=20251013"></script>
</body>
</html>
